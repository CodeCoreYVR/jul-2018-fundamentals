<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
      // Initialize Firebase
      const config = {
        apiKey: "AIzaSyAIbEiGT9kEWDoHSI8b5CU1xdeOiWcVxRY",
        authDomain: "day-9-69400.firebaseapp.com",
        databaseURL: "https://day-9-69400.firebaseio.com",
        projectId: "day-9-69400",
        storageBucket: "day-9-69400.appspot.com",
        messagingSenderId: "502252065699"
      };
      firebase.initializeApp(config);

      $(document).ready(function(){
        // 1. connect to your database
        const students = firebase.database().ref('/students');
        // 2. listen for an event
        // child_added, if there is existing data in your database, this event will give it to you
        students.on("child_added", function(data){
          console.log(data);
          console.log(data.key); // primary key
          // 1
          console.log(data.val()); // the fields and values in the form of an object
          // {firstName: "Jacob", lastName: "Tran"}

          const dataObj = data.val();
          // 3. change the message
          let name = dataObj.firstName + " " + dataObj.lastName;
          $('h1').html(`Hello ${ name }, Welcome to the Firebase Demo!`);
        });
      });
    </script>
  </head>
  <body>
    <h1>Hello Jacob Tran, Welcome to the Firebase Demo!</h1>
  </body>
</html>
